; Optimized PHP 8.4 Configuration for GLPI 11
; For 8GB RAM / 6 CPU cores system

[PHP]

; Core Settings
memory_limit = 256M                 ; Increased from 128M (GLPI needs this)
max_execution_time = 300            ; 5 minutes for long operations (from 30s)
max_input_time = 300                ; Match max_execution_time
default_socket_timeout = 60

; File Upload Settings (for GLPI backups/imports)
post_max_size = 512M                ; Increased from 8M
upload_max_filesize = 512M          ; Increased from 2M
upload_tmp_dir = /tmp

; Variable Parsing
max_input_vars = 5000               ; Increased from default 1000 (GLPI forms have many fields)

; Error Handling
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT
display_errors = Off
log_errors = On
error_log = /var/log/php8.4-fpm-errors.log

; Sessions
session.gc_maxlifetime = 86400      ; 24 hours
session.cookie_httponly = 1
session.cookie_secure = 0           ; Set to 1 if using HTTPS

; Date/Time
date.timezone = America/Sao_Paulo   ; Adjust as needed

; Performance Tuning
expose_php = Off
default_charset = UTF-8
zlib.output_compression = On
zlib.output_compression_level = 6

; File Handling
realpath_cache_size = 4096K
realpath_cache_ttl = 600
